pipeline {
agent any
tools {
jdk 'Java 8'
       maven 'Maven 3.6.3'
}
parameters {
choice(name:profileName,choices:['Google','Qaclick'],description='Hello,Hai')
options {
timestamps()
}
stages{
stage('Checkout') {
steps {
git credentialsId: 'Suman Git', url: 'https://github.com/Suman-arch/fourth.git'
}
}
stage('CCT') {
steps {
bat "mvn clean compile test -P${profileName}"
}
}
stage('Writing html file')
        {
        steps {
        sh 'echo "<html>" >> myfile.html'
        sh 'echo "<header><title> This is the title</title></header>" >> myfile.html'
        sh 'echo "<body> how do you do? </body>" >> myfile.html'
        sh 'echo "</html>" >> myfile.html'
        sh 'ls -al myfile.html'
        sh 'head -1 myfile.html'
        }
        }
        stage('Email')
        {
        steps {
        env.ForEmailPlugin = env.WORKSPACE
        emailext mimeType: 'text/html',
        body: '${FILE, path="myfile.html"}',
        subject: currentBuild.currentResult + " : " + env.JOB_NAME,
        to: 'abhishek260297@gmail.com'
        }  
}
}
}
}
